import{v as oe,$ as k,a0 as A,j as i,aj as le,c as se,n as ne,w as I,aN as re,ar as V,s as ue,l as ie,k as de,a9 as ce,z as a,A as u,C as y,I as d,O as p,B as e,P as _,G as n,N as b,aM as E,F as ve,R as g,aO as me,aa as c,bl as w,Q as h,ab as P,Z as L,Y as B}from"./index.8f0bf197.js";import{d as pe}from"./downloadService.40931a22.js";import{l as _e,j as ye}from"./app.be92839b.js";import"./Btn.abe2bb59.js";import{u as fe,b as Se,S as be,A as ge,a as ke}from"./index.f07e8060.js";import{S as Ae}from"./ScreenHeaderSkeleton.a1e2892b.js";import{S as we}from"./ArtistAlbumScreenTabs.b0203fe8.js";import{_ as he}from"./_plugin-vue_export-helper.cdc0426e.js";import"./useAuthorization.5beda362.js";import"./useSongMenuMethods.5f7dfc3e.js";import"./SoundBars.e7c8d9da.js";import"./useUpload.8e7c76aa.js";const Pe={key:0,id:"artistWrapper"},Ce=["onClick"],De={class:"songs-pane"},Ie={class:"albums-pane"},Ve={key:0,class:"as-list"},Ee={key:1,class:"as-list"},Le={key:0,class:"info-pane"},Be=oe({__name:"ArtistScreen",setup(Te){const T=k(()=>A(()=>import("./ArtistInfo.6b4834e4.js"),["assets/ArtistInfo.6b4834e4.js","assets/ArtistInfo.bd5a90e2.css","assets/index.8f0bf197.js","assets/app.be92839b.js","assets/app.f853c32d.css","assets/Btn.abe2bb59.js","assets/Btn.535c40ae.css","assets/_plugin-vue_export-helper.cdc0426e.js","assets/mediaInfoService.83930c31.js","assets/index.f07e8060.js","assets/index.5481f61c.css","assets/useAuthorization.5beda362.js","assets/useSongMenuMethods.5f7dfc3e.js","assets/downloadService.40931a22.js","assets/SoundBars.e7c8d9da.js","assets/useUpload.8e7c76aa.js"])),R=k(()=>A(()=>import("./AlbumCard.1926e624.js"),["assets/AlbumCard.1926e624.js","assets/index.f07e8060.js","assets/index.5481f61c.css","assets/index.8f0bf197.js","assets/useAuthorization.5beda362.js","assets/app.be92839b.js","assets/app.f853c32d.css","assets/Btn.abe2bb59.js","assets/Btn.535c40ae.css","assets/_plugin-vue_export-helper.cdc0426e.js","assets/useSongMenuMethods.5f7dfc3e.js","assets/downloadService.40931a22.js","assets/SoundBars.e7c8d9da.js","assets/useUpload.8e7c76aa.js"])),F=k(()=>A(()=>import("./index.f07e8060.js").then(s=>s.i),["assets/index.f07e8060.js","assets/index.5481f61c.css","assets/index.8f0bf197.js","assets/useAuthorization.5beda362.js","assets/app.be92839b.js","assets/app.f853c32d.css","assets/Btn.abe2bb59.js","assets/Btn.535c40ae.css","assets/_plugin-vue_export-helper.cdc0426e.js","assets/useSongMenuMethods.5f7dfc3e.js","assets/downloadService.40931a22.js","assets/SoundBars.e7c8d9da.js","assets/useUpload.8e7c76aa.js"])),t=i("Songs"),{showErrorDialog:x}=_e(),{getRouteParam:N,go:O,onScreenActivated:U}=ye(),C=i(),r=i(),v=i([]),m=i(!1);let f=i();i();const{SongList:z,SongListControls:j,ControlsToggle:M,headerLayout:G,songList:H,showingControls:S,isPhone:Q,duration:W,sort:Y,onPressEnter:Z,playAll:$,playSelected:q,applyFilter:J,onScrollBreakpoint:K}=fe(v),{useLastfm:D}=Se(),X=le(se.state,"allow_download"),ee=ne(()=>{const s=new Set;return v.value.forEach(o=>s.add(o.album_id)),s.size});I(t,async s=>{s==="Albums"&&!f.value&&(f.value=await re.fetchForArtist(r.value))}),I(C,async s=>{if(!(!s||m.value)){m.value=!0;try{[r.value,v.value]=await Promise.all([V.resolve(s),ue.fetchForArtist(s)])}catch(o){ie.error(o),x("Failed to load artist. Please try again.","Error")}finally{m.value=!1}}});const ae=()=>pe.fromArtist(r.value);return U("Artist",()=>C.value=parseInt(N("id"))),de.on("SONGS_UPDATED",()=>V.byId(r.value.id)||O("artists")),(s,o)=>{const te=ce("koel-overflow-fade");return r.value?(a(),u("section",Pe,[m.value?(a(),y(Ae,{key:0})):d("",!0),!m.value&&r.value?(a(),y(be,{key:1,layout:v.value.length===0?"collapsed":e(G)},{thumbnail:p(()=>[_(ge,{entity:r.value},null,8,["entity"])]),meta:p(()=>[n("span",null,b(e(E)(ee.value,"album")),1),n("span",null,b(e(E)(v.value,"song")),1),n("span",null,b(e(W)),1),X.value?(a(),u("a",{key:0,class:"download",role:"button",title:"Download all songs by this artist",onClick:ve(ae,["prevent"])}," Download All ",8,Ce)):d("",!0)]),controls:p(()=>[v.value.length&&(!e(Q)||e(S))?(a(),y(e(j),{key:0,onFilter:e(J),onPlayAll:e($),onPlaySelected:e(q)},null,8,["onFilter","onPlayAll","onPlaySelected"])):d("",!0)]),default:p(()=>[g(b(r.value.name)+" ",1),_(e(M),{modelValue:e(S),"onUpdate:modelValue":o[0]||(o[0]=l=>me(S)?S.value=l:null)},null,8,["modelValue"])]),_:1},8,["layout"])):d("",!0),_(we,null,{header:p(()=>[n("label",{class:h({active:t.value==="Songs"})},[g(" Songs "),c(n("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l),type:"radio",name:"tab",value:"Songs"},null,512),[[w,t.value]])],2),n("label",{class:h({active:t.value==="Albums"})},[g(" Albums "),c(n("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.value=l),type:"radio",name:"tab",value:"Albums"},null,512),[[w,t.value]])],2),e(D)?(a(),u("label",{key:0,class:h({active:t.value==="Info"})},[g(" Information "),c(n("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>t.value=l),type:"radio",name:"tab",value:"Info"},null,512),[[w,t.value]])],2)):d("",!0)]),default:p(()=>[c(n("div",De,[m.value?(a(),y(ke,{key:0})):(a(),y(e(z),{key:1,ref_key:"songList",ref:H,onSort:e(Y),"onPress:enter":e(Z),onScrollBreakpoint:e(K)},null,8,["onSort","onPress:enter","onScrollBreakpoint"]))],512),[[P,t.value==="Songs"]]),c(n("div",Ie,[e(f)?c((a(),u("ul",Ve,[(a(!0),u(L,null,B(e(f),l=>(a(),u("li",{key:l.id},[_(e(R),{album:l,layout:"compact"},null,8,["album"])]))),128))])),[[te]]):(a(),u("ul",Ee,[(a(),u(L,null,B(12,l=>n("li",{key:l},[_(e(F),{layout:"compact"})])),64))]))],512),[[P,t.value==="Albums"]]),e(D)&&r.value?c((a(),u("div",Le,[_(e(T),{artist:r.value,mode:"full"},null,8,["artist"])],512)),[[P,t.value==="Info"]]):d("",!0)]),_:1})])):d("",!0)}}});const We=he(Be,[["__scopeId","data-v-b5901b90"]]);export{We as default};
