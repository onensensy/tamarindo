import{v as y,j as w,bw as r,n as S,z as b,A as x,P as l,O as c,G as e,aa as P,aH as B,F as k,R as a,bx as C}from"./index.8f0bf197.js";import{B as M,f as T}from"./Btn.abe2bb59.js";import{k as V,l as D,j as E}from"./app.be92839b.js";import{u as H}from"./useOverlay.b8f8c136.js";import{S as O}from"./index.f07e8060.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./useAuthorization.5beda362.js";import"./useSongMenuMethods.5f7dfc3e.js";import"./downloadService.40931a22.js";import"./SoundBars.e7c8d9da.js";import"./useUpload.8e7c76aa.js";const N={id:"settingsWrapper"},R=["onSubmit"],W={class:"form-row"},j=e("label",{for:"inputSettingsPath"},"Media Path",-1),U=e("p",{id:"mediaPathHelp",class:"help"},[a(" The "),e("em",null,"absolute"),a(" path to the server directory containing your media. Koel will scan this directory for songs and extract any available information."),e("br"),a(" Scanning may take a while, especially if you have a lot of songs, so be patient. ")],-1),z={class:"form-row"},$=y({__name:"SettingsScreen",setup(A){const{toastSuccess:d}=V(),{showConfirmDialog:m,showErrorDialog:u}=D(),{go:p}=E(),{showOverlay:h,hideOverlay:f}=H(),t=w(r.state.media_path),i=t.value,_=S(()=>!i||!t.value?!1:i!==t.value.trim()),n=async()=>{h({message:"Scanning\u2026"});try{await r.update({media_path:t.value}),d("Settings saved."),p("home"),T()}catch(o){const s=o.response.status===422?C(o.response.data)[0]:"Unknown error.";u(s,"Error")}finally{f()}},g=async()=>{_.value?await m("Changing the media path will essentially remove all existing data \u2013 songs, artists,           albums, favorites, everything \u2013 and empty your playlists! Sure you want to proceed?","Confirm")&&await n():await n()};return(o,s)=>(b(),x("section",N,[l(O,null,{default:c(()=>[a("Settings")]),_:1}),e("form",{class:"main-scroll-wrap",onSubmit:k(g,["prevent"])},[e("div",W,[j,U,P(e("input",{id:"inputSettingsPath","onUpdate:modelValue":s[0]||(s[0]=v=>t.value=v),"aria-describedby":"mediaPathHelp",name:"media_path",type:"text"},null,512),[[B,t.value]])]),e("div",z,[l(M,{type:"submit"},{default:c(()=>[a("Scan")]),_:1})])],40,R)]))}});export{$ as default};
