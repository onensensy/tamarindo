import{v as E,j as h,aj as K,au as R,a9 as T,z as c,A as u,G as e,R as a,B as p,N as g,aM as z,I as G,aa as w,aH as U,bI as $,Z as q,Y as A,P as b,O as C,F as S,aG as H,at as L,l as Y,a5 as Z,a6 as J}from"./index.8f0bf197.js";import{k as Q,l as W,j as X}from"./app.be92839b.js";import{u as ee}from"./useModal.8598f864.js";import{u as se}from"./useOverlay.b8f8c136.js";import{B as x}from"./Btn.abe2bb59.js";import{_ as oe}from"./_plugin-vue_export-helper.cdc0426e.js";const te=l=>(Z("data-v-57bb562f"),l=l(),J(),l),ae=["onSubmit","onKeydown"],le={key:0,"data-testid":"from-songs",class:"text-secondary"},ne={class:"form-row cols"},re={class:"name"},ie={class:"folder"},ce=te(()=>e("option",{value:null},null,-1)),ue=["value"],de=E({__name:"CreatePlaylistForm",emits:["close"],setup(l,{emit:k}){var v,y;const{showOverlay:P,hideOverlay:B}=se(),{toastSuccess:D}=Q(),{showConfirmDialog:I,showErrorDialog:N}=W(),{go:M}=X(),{getFromContext:_}=ee(),o=(v=_("folder"))!=null?v:null,d=(y=_("songs"))!=null?y:[],n=h(o==null?void 0:o.id),r=h(""),V=K(R.state,"folders"),m=()=>k("close"),F=async()=>{P();try{const t=await L.store(r.value,{folder_id:n.value},d);m(),D(`Playlist "${t.name}" created.`),M(`playlist/${t.id}`)}catch(t){N("Something went wrong. Please try again.","Error"),Y.error(t)}finally{B()}},O=()=>r.value.trim()===""&&n.value===(o==null?void 0:o.id),f=async()=>{if(O()){m();return}await I("Discard all changes?")&&m()};return(t,i)=>{const j=T("koel-focus");return c(),u("form",{onSubmit:S(F,["prevent"]),onKeydown:H(f,["esc"])},[e("header",null,[e("h1",null,[a(" New Playlist "),p(d).length?(c(),u("span",le," from "+g(p(z)(p(d),"song")),1)):G("",!0)])]),e("main",null,[e("div",ne,[e("label",re,[a(" Name "),w(e("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>r.value=s),name:"name",placeholder:"Playlist name",required:"",type:"text"},null,512),[[U,r.value],[j]])]),e("label",ie,[a(" Folder "),w(e("select",{"onUpdate:modelValue":i[1]||(i[1]=s=>n.value=s)},[ce,(c(!0),u(q,null,A(V.value,s=>(c(),u("option",{key:s.id,value:s.id},g(s.name),9,ue))),128))],512),[[$,n.value]])])])]),e("footer",null,[b(x,{type:"submit"},{default:C(()=>[a("Save")]),_:1}),b(x,{white:"",onClick:S(f,["prevent"])},{default:C(()=>[a("Cancel")]),_:1},8,["onClick"])])],40,ae)}}});const he=oe(de,[["__scopeId","data-v-57bb562f"]]);export{he as default};
