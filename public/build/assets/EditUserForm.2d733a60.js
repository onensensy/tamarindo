import{v as V,w as B,a1 as D,a9 as S,z as F,A as M,G as e,R as r,aa as u,aH as p,B as o,P as d,O as f,F as w,aG as N,u as O,bx as I,l as q,b as K,a5 as T,a6 as A}from"./index.8f0bf197.js";import{k as G,l as P}from"./app.be92839b.js";import{u as j}from"./useModal.8598f864.js";import{u as z}from"./useOverlay.b8f8c136.js";import{B as h}from"./Btn.abe2bb59.js";import{_ as H}from"./TooltipIcon.vue_vue_type_script_setup_true_lang.7d6ec67c.js";import{C as L}from"./CheckBox.c099da78.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";const v=n=>(T("data-v-6c69610b"),n=n(),A(),n),$=["onSubmit","onKeydown"],J=v(()=>e("header",null,[e("h1",null,"Edit User")],-1)),Q={class:"form-row"},W={class:"form-row"},X={class:"form-row"},Y=v(()=>e("p",{class:"help"},"Min. 10 characters. Should be a mix of characters, numbers, and symbols.",-1)),Z={class:"form-row"},ee=V({__name:"EditUserForm",emits:["close"],setup(n,{emit:b}){const{showOverlay:y,hideOverlay:g}=z(),{toastSuccess:x}=G(),{showConfirmDialog:k,showErrorDialog:U}=P(),l=j().getFromContext("user");let m,a;B(l,()=>{m={name:l.name,email:l.email,is_admin:l.is_admin},a=D(Object.assign({},m))},{immediate:!0});const E=async()=>{y();try{await O.update(l,a),x("User profile updated."),c()}catch(i){const s=i.response.status===422?I(i.response.data)[0]:"Unknown error.";U(s,"Error"),q.error(i)}finally{g()}},c=()=>b("close"),_=async()=>{if(K.exports.isEqual(m,a)){c();return}await k("Discard all changes?")&&c()};return(i,s)=>{const C=S("koel-focus");return F(),M("form",{"data-testid":"edit-user-form",onSubmit:w(E,["prevent"]),onKeydown:N(_,["esc"])},[J,e("main",null,[e("div",Q,[e("label",null,[r(" Name "),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o(a).name=t),name:"name",required:"",title:"Name",type:"text"},null,512),[[p,o(a).name],[C]])])]),e("div",W,[e("label",null,[r(" Email "),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o(a).email=t),name:"email",required:"",title:"Email",type:"email"},null,512),[[p,o(a).email]])])]),e("div",X,[e("label",null,[r(" Password "),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o(a).password=t),autocomplete:"new-password",name:"password",placeholder:"Leave blank for no changes",type:"password"},null,512),[[p,o(a).password]])]),Y]),e("div",Z,[e("label",null,[d(L,{modelValue:o(a).is_admin,"onUpdate:modelValue":s[3]||(s[3]=t=>o(a).is_admin=t),name:"is_admin"},null,8,["modelValue"]),r(" User is an admin "),d(H,{title:"Admins can perform administrative tasks like managing users and uploading songs."})])])]),e("footer",null,[d(h,{class:"btn-update",type:"submit"},{default:f(()=>[r("Update")]),_:1}),d(h,{class:"btn-cancel",white:"",onClick:w(_,["prevent"])},{default:f(()=>[r("Cancel")]),_:1},8,["onClick"])])],40,$)}}});const de=R(ee,[["__scopeId","data-v-6c69610b"]]);export{de as default};
