import{v as B,j as _,aj as I,au as M,a9 as N,z as d,A as c,G as e,R as r,aa as p,aH as V,bI as O,Z as K,Y as T,P as f,O as v,F as y,aG as j,at as G,l as R,a5 as U,a6 as q,N as z}from"./index.8f0bf197.js";import{k as A,l as H}from"./app.be92839b.js";import{u as L}from"./useModal.8598f864.js";import{u as Y}from"./useOverlay.b8f8c136.js";import{B as h}from"./Btn.abe2bb59.js";import{_ as Z}from"./_plugin-vue_export-helper.cdc0426e.js";const w=o=>(U("data-v-f1de99e4"),o=o(),q(),o),J=["onSubmit","onKeydown"],Q=w(()=>e("header",null,[e("h1",null,"Edit Playlist")],-1)),W={class:"form-row cols"},X={class:"name"},$={class:"folder"},ee=w(()=>e("option",{value:null},null,-1)),te=["value"],ae=B({__name:"EditPlaylistForm",emits:["close"],setup(o,{emit:g}){const{showOverlay:S,hideOverlay:x}=Y(),{toastSuccess:P}=A(),{showConfirmDialog:b,showErrorDialog:k}=H(),a=L().getFromContext("playlist"),s=_(a.name),l=_(a.folder_id),C=I(M.state,"folders"),i=()=>g("close"),F=async()=>{S();try{await G.update(a,{name:s.value,folder_id:l.value}),P("Playlist updated."),i()}catch(m){k("Something went wrong. Please try again.","Error"),R.error(m)}finally{x()}},D=()=>a.name===s.value&&a.folder_id===l.value,u=async()=>{if(D()){i();return}await b("Discard all changes?")&&i()};return(m,n)=>{const E=N("koel-focus");return d(),c("form",{onSubmit:y(F,["prevent"]),onKeydown:j(u,["esc"])},[Q,e("main",null,[e("div",W,[e("label",X,[r(" Name "),p(e("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>s.value=t),name:"name",placeholder:"Playlist name",required:"",title:"Playlist name",type:"text"},null,512),[[V,s.value],[E]])]),e("label",$,[r(" Folder "),p(e("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>l.value=t)},[ee,(d(!0),c(K,null,T(C.value,t=>(d(),c("option",{key:t.id,value:t.id},z(t.name),9,te))),128))],512),[[O,l.value]])])])]),e("footer",null,[f(h,{type:"submit"},{default:v(()=>[r("Save")]),_:1}),f(h,{white:"",onClick:y(u,["prevent"])},{default:v(()=>[r("Cancel")]),_:1},8,["onClick"])])],40,J)}}});const de=Z(ae,[["__scopeId","data-v-f1de99e4"]]);export{de as default};
