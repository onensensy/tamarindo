import{v as h,x as C,j as r,k as _,a9 as m,aa as k,z as b,A as E,G as B,aC as N,R as M,Q as S,B as T,a7 as O,F as D,aG as R,I as $,as as w,l as z}from"./index.8f0bf197.js";import"./app.be92839b.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";const V=["onKeydown"],q=h({__name:"ContextMenuBase",props:{extraClass:{}},setup(n,{expose:i}){const c=n,{extraClass:p}=C(c),t=r(),a=r(!1),l=r(0),v=r(0),y=async(e,o=!1)=>{var f;const{bottom:s,right:d}=e.getBoundingClientRect();s>window.innerHeight?(e.style.top="auto",e.style.bottom="0"):e.style.bottom="auto",d>window.innerWidth?(e.style.right=o?`${(f=t.value)==null?void 0:f.getBoundingClientRect().width}px`:"0",e.style.left="auto"):e.style.right="auto"},x=()=>{var e;(e=t.value)==null||e.querySelectorAll(".has-sub").forEach(o=>{const s=o.querySelector(".submenu");!s||(o.addEventListener("mouseenter",async()=>{s.style.display="block",await w(),await y(s,!0)}),o.addEventListener("mouseleave",()=>{s.style.top="0",s.style.bottom="auto",s.style.display="none"}))})},g=async(e=0,o=0)=>{l.value=e,v.value=o,a.value=!0,await w();try{await y(t.value),x()}catch(s){z.error(s)}_.emit("CONTEXT_MENU_OPENED",t.value)},u=()=>a.value=!1;return _.on("CONTEXT_MENU_OPENED",e=>e===t.value||u()),i({open:g,close:u,shown:a}),(e,o)=>{const s=m("koel-clickaway"),d=m("koel-focus");return a.value?k((b(),E("nav",{key:0,ref_key:"el",ref:t,class:S([T(p),"menu context-menu"]),style:O({top:`${l.value}px`,left:`${v.value}px`}),tabindex:"0",onContextmenu:o[0]||(o[0]=D(()=>{},["prevent"])),onKeydown:R(u,["esc"])},[B("ul",null,[N(e.$slots,"default",{},()=>[M("Menu items go here.")],!0)])],46,V)),[[s,u],[d]]):$("",!0)}}}),A=K(q,[["__scopeId","data-v-a6618b7d"]]),P=()=>{const n=r(),i=async(t,a)=>{var l;return await((l=n.value)==null?void 0:l.open(t,a))},c=()=>{var t;return(t=n.value)==null?void 0:t.close()};return{ContextMenuBase:A,base:n,open:i,close:c,trigger:t=>{c(),t()}}};export{P as u};
