import{v as x,j as C,a9 as F,z as k,A as B,G as e,aa as D,aH as S,P as n,O as i,F as c,aG as b,au as P,l as E,R as m}from"./index.8f0bf197.js";import{k as M,l as O}from"./app.be92839b.js";import{u as V}from"./useModal.8598f864.js";import{u as K}from"./useOverlay.b8f8c136.js";import{B as d}from"./Btn.abe2bb59.js";import"./_plugin-vue_export-helper.cdc0426e.js";const N=["onSubmit","onKeydown"],T=e("header",null,[e("h1",null,"Rename Playlist Folder")],-1),G={class:"form-row"},I=x({__name:"EditPlaylistFolderForm",emits:["close"],setup(R,{emit:u}){const{showOverlay:f,hideOverlay:p}=K(),{toastSuccess:y}=M(),{showConfirmDialog:h,showErrorDialog:v}=O(),a=V().getFromContext("folder"),o=C(a.name),_=async()=>{f();try{await P.rename(a,o.value),y("Playlist folder renamed."),t()}catch(r){v("Something went wrong. Please try again.","Error"),E.error(r)}finally{p()}},t=()=>u("close"),s=async()=>{if(o.value.trim()===a.name){t();return}await h("Discard all changes?")&&t()};return(r,l)=>{const w=F("koel-focus");return k(),B("form",{onSubmit:c(_,["prevent"]),onKeydown:b(s,["esc"])},[T,e("main",null,[e("div",G,[D(e("input",{"onUpdate:modelValue":l[0]||(l[0]=g=>o.value=g),name:"name",placeholder:"Folder name",required:"",title:"Folder name",type:"text"},null,512),[[S,o.value],[w]])])]),e("footer",null,[n(d,{type:"submit"},{default:i(()=>[m("Save")]),_:1}),n(d,{white:"",onClick:c(s,["prevent"])},{default:i(()=>[m("Cancel")]),_:1},8,["onClick"])])],40,N)}}});export{I as default};
