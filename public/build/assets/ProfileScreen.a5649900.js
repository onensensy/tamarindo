import{b as L,f as F,d as N,S as M}from"./index.f07e8060.js";import{v as f,j as R,V as K,u as $,a9 as O,z as o,A as n,G as t,R as l,aa as S,aH as x,P as c,O as b,B as s,I as y,F as C,bx as q,l as W,a5 as g,a6 as k,y as T,$ as j,a0 as z,n as H,C as U,av as Y,h as G,N as A,i as Q,e as p,x as Z,bC as J,Q as X,aj as ee,bD as I,Z as te,Y as oe}from"./index.8f0bf197.js";import{B as se,i as V,f as ae}from"./Btn.abe2bb59.js";import{k as ne,l as le}from"./app.be92839b.js";import{P as ie}from"./PasswordField.1e406e0f.js";import{_ as v}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as B}from"./useAuthorization.5beda362.js";import{C as w}from"./CheckBox.c099da78.js";import"./useSongMenuMethods.5f7dfc3e.js";import"./downloadService.40931a22.js";import"./SoundBars.e7c8d9da.js";import"./useUpload.8e7c76aa.js";const re=a=>(g("data-v-d7ddbad1"),a=a(),k(),a),de=["onSubmit"],ce={class:"form-row"},_e={class:"form-row"},ue={class:"form-row"},me={class:"form-row"},pe=re(()=>t("span",{class:"password-rules help"}," Min. 10 characters. Should be a mix of characters, numbers, and symbols. ",-1)),fe={class:"form-row"},he={key:0,class:"demo-notice"},ve=f({__name:"ProfileForm",setup(a){const{toastSuccess:_}=ne(),{showErrorDialog:u}=le(),e=R({});K(()=>{e.value={name:$.current.name,email:$.current.email,current_password:null}});const i=async()=>{if(!e.value)throw Error();if(V()){_("Profile updated.");return}try{await $.updateProfile(Object.assign({},e.value)),e.value.current_password=null,delete e.value.new_password,_("Profile updated.")}catch(r){const d=r.response.status===422?q(r.response.data)[0]:"Unknown error.";u(d,"Error"),W.log(r)}};return(r,d)=>{const h=O("koel-focus");return o(),n("form",{"data-testid":"update-profile-form",onSubmit:C(i,["prevent"])},[t("div",ce,[t("label",null,[l(" Current Password "),S(t("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>e.value.current_password=m),name:"current_password",placeholder:"Required to update your profile",required:"",type:"password","data-testid":"currentPassword"},null,512),[[x,e.value.current_password],[h]])])]),t("div",_e,[t("label",null,[l(" Name "),S(t("input",{id:"inputProfileName","onUpdate:modelValue":d[1]||(d[1]=m=>e.value.name=m),name:"name",required:"",type:"text","data-testid":"name"},null,512),[[x,e.value.name]])])]),t("div",ue,[t("label",null,[l(" Email Address "),S(t("input",{id:"inputProfileEmail","onUpdate:modelValue":d[2]||(d[2]=m=>e.value.email=m),name:"email",required:"",type:"email","data-testid":"email"},null,512),[[x,e.value.email]])])]),t("div",me,[t("label",null,[l(" New Password "),c(ie,{placeholder:"Leave empty to keep current password",modelValue:e.value.new_password,"onUpdate:modelValue":d[3]||(d[3]=m=>e.value.new_password=m),"data-testid":"newPassword",autocomplete:"new-password"},null,8,["modelValue"]),pe])]),t("div",fe,[c(se,{class:"btn-submit",type:"submit"},{default:b(()=>[l("Save")]),_:1}),s(V)()?(o(),n("span",he," Changes will not be saved in the demo version. ")):y("",!0)])],40,de)}}});const ye=v(ve,[["__scopeId","data-v-d7ddbad1"]]),D=a=>(g("data-v-36f95a05"),a=a(),k(),a),we={class:"text-secondary"},be={class:"spotify-icon"},ge={key:0},ke=D(()=>t("p",null," Spotify integration is enabled. Koel will attempt to retrieve album arts and artist images from Spotify when a song is played, if needed. ",-1)),$e=[ke],Se={key:1},xe={key:0,"data-testid":"spotify-admin-instruction"},Ce=D(()=>t("a",{href:"https://docs.koel.dev/3rd-party.html#spotify",class:"text-highlight",target:"_blank"},"Koel\u2019s Wiki",-1)),Pe={key:1,"data-testid":"spotify-user-instruction"},Ie=f({__name:"SpotifyIntegration",setup(a){const{currentUser:_,isAdmin:u}=B(),{useSpotify:e}=L();return(i,r)=>{const d=T("Icon");return o(),n("section",we,[t("h1",null,[t("span",be,[c(d,{icon:s(F)},null,8,["icon"])]),l(" Spotify Integration ")]),s(e)?(o(),n("div",ge,$e)):(o(),n("div",Se,[t("p",null,[l(" Spotify integration is not enabled. "),s(u)?(o(),n("span",xe,[l(" Visit "),Ce,l(" for a quick how-to. ")])):(o(),n("span",Pe," Try politely asking an administrator to enable it. "))])]))])}}});const Ve=v(Ie,[["__scopeId","data-v-36f95a05"]]),P=a=>(g("data-v-f1196310"),a=a(),k(),a),Le={class:"text-secondary"},Te={class:"lastfm-icon"},Ue={key:0,"data-testid":"lastfm-integrated"},Ae=P(()=>t("p",null,"Last.fm integration is enabled. Koel will attempt to retrieve album and artist information from Last.fm.",-1)),Be={key:0},De={key:1},Ee=P(()=>t("p",null,[l(" Connecting Koel and your Last.fm account enables such exciting features as "),t("a",{class:"text-highlight",href:"https://www.last.fm/about/trackmymusic",rel:"noopener",target:"_blank"},"scrobbling"),l(". ")],-1)),Fe={class:"buttons"},Ne={key:1,"data-testid":"lastfm-not-integrated"},Me={key:0,"data-testid":"lastfm-admin-instruction"},Re=P(()=>t("a",{href:"https://docs.koel.dev/3rd-party.html#last-fm",class:"text-highlight",target:"_blank"},"Koel\u2019s Wiki",-1)),Ke={key:1,"data-testid":"lastfm-user-instruction"},Oe=f({__name:"LastfmIntegration",setup(a){const _=j(()=>z(()=>import("./Btn.abe2bb59.js").then(m=>m.a),["assets/Btn.abe2bb59.js","assets/Btn.535c40ae.css","assets/index.8f0bf197.js","assets/_plugin-vue_export-helper.cdc0426e.js"])),{currentUser:u,isAdmin:e}=B(),{useLastfm:i}=L(),r=H(()=>Boolean(u.value.preferences.lastfm_session_key)),d=()=>window.open(`${window.BASE_URL}lastfm/connect?api_token=${Y.getApiToken()}`,"_blank","toolbar=no,titlebar=no,location=no,width=1024,height=640"),h=async()=>{await G.delete("lastfm/disconnect"),ae()};return(m,it)=>{const E=T("Icon");return o(),n("section",Le,[t("h1",null,[t("span",Te,[c(E,{icon:s(N)},null,8,["icon"])]),l(" Last.fm Integration ")]),s(i)?(o(),n("div",Ue,[Ae,r.value?(o(),n("p",Be," It appears that you have connected your Last.fm account as well \u2013 Perfect! ")):(o(),n("p",De,"You can also connect your Last.fm account here.")),Ee,t("div",Fe,[c(s(_),{class:"connect",onClick:C(d,["prevent"])},{default:b(()=>[l(A(r.value?"Reconnect":"Connect"),1)]),_:1},8,["onClick"]),r.value?(o(),U(s(_),{key:0,class:"disconnect",gray:"",onClick:C(h,["prevent"])},{default:b(()=>[l("Disconnect")]),_:1},8,["onClick"])):y("",!0)])])):(o(),n("div",Ne,[t("p",null,[l(" Last.fm integration is not enabled on this installation of Koel. "),s(e)?(o(),n("span",Me,[l(" Visit "),Re,l(" for a quick how-to. ")])):(o(),n("span",Ke," Try politely asking an administrator to enable it. "))])]))])}}});const qe=v(Oe,[["__scopeId","data-v-f1196310"]]),We={key:0,class:"form-row"},je={key:1,class:"form-row"},ze={key:2,class:"form-row"},He={class:"form-row"},Ye=f({__name:"PreferencesForm",setup(a){const _=Q.phone;return(u,e)=>(o(),n("div",null,[s(_)?y("",!0):(o(),n("div",We,[t("label",null,[c(w,{modelValue:s(p).notify,"onUpdate:modelValue":e[0]||(e[0]=i=>s(p).notify=i),name:"notify"},null,8,["modelValue"]),l(" Show \u201CNow Playing\u201D song notification ")])])),s(_)?y("",!0):(o(),n("div",je,[t("label",null,[c(w,{modelValue:s(p).confirmClosing,"onUpdate:modelValue":e[1]||(e[1]=i=>s(p).confirmClosing=i),name:"confirm_closing"},null,8,["modelValue"]),l(" Confirm before closing Koel ")])])),s(_)?(o(),n("div",ze,[t("label",null,[c(w,{modelValue:s(p).transcodeOnMobile,"onUpdate:modelValue":e[2]||(e[2]=i=>s(p).transcodeOnMobile=i),name:"transcode_on_mobile"},null,8,["modelValue"]),l(" Convert and play media at 128kbps on mobile ")])])):y("",!0),t("div",He,[t("label",null,[c(w,{modelValue:s(p).showAlbumArtOverlay,"onUpdate:modelValue":e[3]||(e[3]=i=>s(p).showAlbumArtOverlay=i),name:"show_album_art_overlay"},null,8,["modelValue"]),l(" Show a translucent, blurred overlay of the current album\u2019s art ")])])]))}});const Ge=v(Ye,[["__scopeId","data-v-a3dec4d4"]]),Qe=["title"],Ze={class:"name"},Je=f({__name:"ThemeCard",props:{theme:{}},emits:["selected"],setup(a,{emit:_}){const u=a,{theme:e}=Z(u),i=e.value.name?e.value.name:J(e.value.id),r={"background-color":e.value.thumbnailColor};return e.value.thumbnailUrl&&(r["background-image"]=`url(${e.value.thumbnailUrl})`),(d,h)=>(o(),n("div",{class:X([{selected:s(e).selected},"theme"]),style:r,title:`Set current theme to ${s(i)}`,role:"button",onClick:h[0]||(h[0]=m=>d.$emit("selected",s(e)))},[t("div",Ze,A(s(i)),1)],10,Qe))}});const Xe=v(Je,[["__scopeId","data-v-fc0f874b"]]),et=a=>(g("data-v-6588416a"),a=a(),k(),a),tt=et(()=>t("h1",null,"Theme",-1)),ot={class:"themes"},st=f({__name:"ThemeList",setup(a){const _=ee(I.state,"themes"),u=e=>I.setTheme(e);return(e,i)=>(o(),n("section",null,[tt,t("ul",ot,[(o(!0),n(te,null,oe(_.value,r=>(o(),n("li",{key:r.id,"data-testid":"theme-card"},[(o(),U(Xe,{key:r.id,theme:r,onSelected:u},null,8,["theme"]))]))),128))])]))}});const at=v(st,[["__scopeId","data-v-6588416a"]]),nt={id:"profileWrapper"},lt={class:"main-scroll-wrap"},bt=f({__name:"ProfileScreen",setup(a){return(_,u)=>(o(),n("section",nt,[c(M,null,{default:b(()=>[l("Profile & Preferences")]),_:1}),t("div",lt,[c(ye),c(at),c(Ge),c(Ve),c(qe)])]))}});export{bt as default};
