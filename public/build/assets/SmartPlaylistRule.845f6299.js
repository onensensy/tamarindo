import{bS as p,bT as c,bU as j,bV as F,bW as G,bX as Y,bY as Z,bZ as z,b_ as k,b$ as X,c0 as q,v as H,$ as x,a0 as O,x as J,j as S,c1 as T,n as i,w as K,y as Q,z as n,A as r,P as $,O as ee,B as v,a_ as ae,F as te,aa as B,bI as E,G as m,Z as _,Y as f,N as y,C as oe,I as le}from"./index.8f0bf197.js";import{_ as se}from"./_plugin-vue_export-helper.cdc0426e.js";const ne={text:[p,c,j,F,G,Y],number:[p,c,Z,z,k],date:[p,c,X,q,k]},re=ne,ue={class:"row","data-testid":"smart-playlist-rule-row"},ie=["value"],ve=["value"],de={class:"value-wrapper"},pe={key:0,class:"suffix"},ce=H({__name:"SmartPlaylistRule",props:{rule:{}},emits:["input","remove"],setup(P,{emit:b}){const g=P,L=x(()=>O(()=>import("./Btn.abe2bb59.js").then(e=>e.a),["assets/Btn.abe2bb59.js","assets/Btn.535c40ae.css","assets/index.8f0bf197.js","assets/_plugin-vue_export-helper.cdc0426e.js"])),N=x(()=>O(()=>import("./SmartPlaylistRuleInput.52cc7d7a.js"),["assets/SmartPlaylistRuleInput.52cc7d7a.js","assets/SmartPlaylistRuleInput.024ff766.css","assets/index.8f0bf197.js","assets/_plugin-vue_export-helper.cdc0426e.js"])),{rule:U}=J(g),o=Object.assign({},U.value),s=S(),l=S(),h=T.find(e=>e.name===o.model.name);if(!h)throw new Error(`Invalid smart playlist model: ${o.model.name}`);o.model=s.value=h;const u=i(()=>s.value?re[s.value.type]:[]),w=u.value.find(e=>e.operator===o.operator);if(!w)throw new Error(`Invalid smart playlist operator: ${o.operator}`);l.value=w;const A=i(()=>{var e,a;return((e=s.value)==null?void 0:e.name)===o.model.name&&((a=l.value)==null?void 0:a.operator)===o.operator}),I=i(()=>{if(!l.value)return[];const e=[];for(let a=0,d=l.value.inputs||1;a<d;++a)e.push({id:`${o.model.name}_${l.value.operator}_${a}`,value:A.value?o.value[a]:""});return e});K(u,()=>{var e;((e=s.value)==null?void 0:e.name)===o.model.name?l.value=u.value.find(a=>a.operator===o.operator):l.value=u.value[0]});const V=i(()=>{var e,a;return((e=l.value)==null?void 0:e.unit)||((a=s.value)==null?void 0:a.unit)}),D=()=>{var e;b("input",{id:o.id,model:s.value,operator:(e=l.value)==null?void 0:e.operator,value:I.value.map(a=>a.value)})},M=()=>b("remove");return(e,a)=>{const d=Q("Icon");return n(),r("div",ue,[$(v(L),{class:"remove-rule",red:"",title:"Remove this rule",onClick:te(M,["prevent"])},{default:ee(()=>[$(d,{icon:v(ae)},null,8,["icon"])]),_:1},8,["onClick"]),B(m("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),name:"model[]"},[(n(!0),r(_,null,f(v(T),t=>(n(),r("option",{key:t.name,value:t},y(t.label),9,ie))),128))],512),[[E,s.value]]),B(m("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),name:"operator[]"},[(n(!0),r(_,null,f(u.value,t=>(n(),r("option",{key:t.operator,value:t},y(t.label),9,ve))),128))],512),[[E,l.value]]),m("span",de,[(n(!0),r(_,null,f(I.value,t=>{var C,R;return n(),oe(v(N),{key:t.id,modelValue:t.value,"onUpdate:modelValue":[W=>t.value=W,D],type:((C=l.value)==null?void 0:C.type)||((R=s.value)==null?void 0:R.type),value:t.value},null,8,["modelValue","onUpdate:modelValue","type","value"])}),128)),V.value?(n(),r("span",pe,y(V.value),1)):le("",!0)])])}}});const fe=se(ce,[["__scopeId","data-v-29439dea"]]);export{fe as default};
